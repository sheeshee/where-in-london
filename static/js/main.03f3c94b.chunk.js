(this["webpackJsonpwhere-in-london"]=this["webpackJsonpwhere-in-london"]||[]).push([[0],{168:function(e,t,o){},169:function(e,t,o){},170:function(e,t,o){},171:function(e,t,o){},318:function(e,t,o){"use strict";o.r(t);var r=o(6),n=o(0),s=o.n(n),a=o(40),i=o.n(a),c=(o(168),o(16)),h=o(17),u=o(8),d=o(23),l=o(22),p=(o(169),o(170),o(45)),g=(o(171),o(34));function b(e){var t=Object(p.a)(e.toString()).reverse().join("").match(/.{1,3}/g);return"\xa3"+Object(p.a)(t.join(",")).reverse().join("")}function j(e){return e.replace(" and "," & ")}var f=function(e){Object(d.a)(o,e);var t=Object(l.a)(o);function o(){return Object(c.a)(this,o),t.apply(this,arguments)}return Object(h.a)(o,[{key:"getHoveredBorough",value:function(){return this.props.hoveredBorough?j(this.props.hoveredBorough):null}},{key:"render",value:function(){var e,t=this,o=this.props.selectedBoroughs.map((function(e,o){return Object(r.jsx)(g.b,{dataKey:j(e),dot:!1,stroke:t.props.boroughColours[j(e)],isAnimationActive:!1},o)}));return this.props.selectedBoroughs.includes(this.getHoveredBorough)||(e=Object(r.jsx)(g.b,{dataKey:this.getHoveredBorough(),dot:!1,stroke:"lightgrey",isAnimationActive:!1},"hover")),Object(r.jsx)("div",{className:"plot",children:this.props.data?Object(r.jsxs)(g.c,{width:375,height:200,margin:{left:40,right:50,top:25},data:this.props.data,children:[e,o,Object(r.jsx)(g.a,{}),Object(r.jsx)(g.d,{dataKey:"date"}),Object(r.jsx)(g.e,{type:"number",tickFormatter:b})]}):Object(r.jsx)("div",{children:"Loading..."})})}}]),o}(n.Component),v=function(e){Object(d.a)(o,e);var t=Object(l.a)(o);function o(){return Object(c.a)(this,o),t.apply(this,arguments)}return Object(h.a)(o,[{key:"render",value:function(){var e;return e=this.props.hoveredBorough&&!this.props.selectedBoroughs.includes(this.props.hoveredBorough)?Object(r.jsxs)("div",{children:["Click now to add ",Object(r.jsx)("span",{className:"borough-add",children:this.props.hoveredBorough}),"."]}):this.props.hoveredBorough&&this.props.selectedBoroughs.includes(this.props.hoveredBorough)?Object(r.jsxs)("div",{children:["Click now to remove ",Object(r.jsx)("span",{style:{backgroundColor:this.props.boroughColours[this.props.hoveredBorough]},children:this.props.hoveredBorough}),"."]}):this.props.selectedBoroughs.length>0?Object(r.jsx)("div",{className:"clear-borough-prompt",onClick:this.props.clearBoroughList,children:"Click here to clear the plot."}):Object(r.jsx)("div",{children:"Click on a borough to add its plot."}),Object(r.jsx)("div",{className:"interaction-prompt",children:e})}}]),o}(n.Component),O=function(e){Object(d.a)(o,e);var t=Object(l.a)(o);function o(){return Object(c.a)(this,o),t.apply(this,arguments)}return Object(h.a)(o,[{key:"render",value:function(){var e=this,t=this.props.selectedBoroughs.map((function(t,o){return Object(r.jsx)("span",{style:{backgroundColor:e.props.boroughColours[t]},children:t},o)}));return Object(r.jsx)("div",{className:"selected-boroughs-list",children:t})}}]),o}(n.Component),m=function(e){Object(d.a)(o,e);var t=Object(l.a)(o);function o(e){var r;return Object(c.a)(this,o),(r=t.call(this,e)).state={data:null},r}return Object(h.a)(o,[{key:"componentDidMount",value:function(){var e=this;fetch("/where-in-london/data/average-house-prices.json").then((function(e){return e.json()})).then((function(t){e.setState({data:t}),console.log("Loaded price data!")})).catch((function(e){return console.error("Could not load data:\n",e)}))}},{key:"render",value:function(){return Object(r.jsxs)("div",{className:"control-box",children:[Object(r.jsx)("h1",{children:"Average House Sale Prices in London"}),Object(r.jsxs)("div",{className:"subtitle-container",children:[Object(r.jsx)("h2",{children:Object(r.jsx)("a",{href:"https://data.london.gov.uk/dataset/uk-house-price-index",children:"Data Source"})}),Object(r.jsx)("h2",{children:Object(r.jsx)("a",{href:"https://github.com/sheeshee/where-in-london",children:"View on GitHub"})})]}),Object(r.jsx)(f,{data:this.state.data,hoveredBorough:this.props.hoveredBorough,selectedBoroughs:this.props.selectedBoroughs,boroughColours:this.props.boroughColours}),Object(r.jsx)(O,{selectedBoroughs:this.props.selectedBoroughs,boroughColours:this.props.boroughColours}),Object(r.jsx)(v,{selectedBoroughs:this.props.selectedBoroughs,hoveredBorough:this.props.hoveredBorough,boroughColours:this.props.boroughColours,clearBoroughList:this.props.clearBoroughList})]})}}]),o}(n.Component),B=o(11),x=o(320),y=o(322),C=o(321),k=Object(B.latLngBounds)(Object(B.latLng)(51,-1),Object(B.latLng)(52,1)),H=function(e){Object(d.a)(o,e);var t=Object(l.a)(o);function o(e){var r;return Object(c.a)(this,o),(r=t.call(this,e)).style=function(e){return{fillColor:r.props.boroughColours[e.properties.name],weight:2,opacity:.5,color:"black",fillOpacity:r.props.selectedBoroughs.includes(e.properties.name)?.8:0}},r.getColor=function(e){try{return r.props.gradient.colorFromValue(e)}catch(t){return console.error("Could not get a color value!\n",t),0}},r.onEachFeature=function(e,t){t.on({mouseover:r.highlightFeature.bind(Object(u.a)(r)),mouseout:r.resetHovered.bind(Object(u.a)(r)),click:r.clickOnFeature.bind(Object(u.a)(r))})},r.highlightFeature=function(e){var t=e.target;r.props.updateHoveredBorough(t.feature.properties.name),r.setHighlight(t)},r.setHighlight=function(e){e.setStyle({fillOpacity:r.props.selectedBoroughs.includes(e.feature.properties.name)?.8:.5})},r.resetHovered=function(e){r.props.updateHoveredBorough("")},r.clickOnFeature=function(e){var t=e.target;r.props.updateSelectedBoroughs(t.feature.properties.name),r.setHighlight(t)},r.geojsonRef=s.a.createRef(),r.state={lat:51.505,lng:.2,zoom:10},r}return Object(h.a)(o,[{key:"render",value:function(){var e=[this.state.lat,this.state.lng];return Object(r.jsxs)(x.a,{center:e,zoom:this.state.zoom,minZoom:9,maxBounds:k,children:[Object(r.jsx)(y.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),this.props.data?Object(r.jsx)(C.a,{ref:this.geojsonRef,data:this.props.data,style:this.style,onEachFeature:this.onEachFeature.bind(this)}):null]})}}]),o}(n.Component),w=o(158),S=o.n(w),F=function e(t){var o=this;Object(c.a)(this,e),this.getRank=function(e){return(e-o.minValue)/(o.maxValue-o.minValue)*100},this.colorFromValue=function(e){var t=o.getRank(e);return o.colorFromRank(t)},this.colorFromRank=function(e){return"#".concat(o.gradient.colorAt(e))},this.maxValue=Math.max.apply(Math,Object(p.a)(t)),this.minValue=Math.min.apply(Math,Object(p.a)(t)),this.gradient=new S.a,this.gradient.setSpectrum("green","red")},L=o(98),M=function(e){Object(d.a)(o,e);var t=Object(l.a)(o);function o(e){var r;return Object(c.a)(this,o),(r=t.call(this,e)).updateHoveredBorough=function(e){r.setState({hoveredBorough:e})},r.updateSelectedBoroughs=function(e){var t=r.state.selectedBoroughs;t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),r.setState({selectedBoroughs:t})},r.clearBoroughList=function(){r.setState({selectedBoroughs:[]})},r.updateHoveredBorough=r.updateHoveredBorough.bind(Object(u.a)(r)),r.updateSelectedBoroughs=r.updateSelectedBoroughs.bind(Object(u.a)(r)),r.clearBoroughList=r.clearBoroughList.bind(Object(u.a)(r)),r.state={hoveredBorough:"",selectedBoroughs:[],data:null,prices:null},console.log("App Constructed"),r}return Object(h.a)(o,[{key:"componentDidMount",value:function(){var e=this;fetch("/where-in-london/data/london_boroughs.json").then((function(e){return e.json()})).then((function(t){console.log("Loaded boroughs!");var o=t.features.map((function(e){return parseFloat(e.properties.latest_average_price)}));e.setState({data:t,prices:o})})).catch((function(e){return console.error("Failed to load data:\n",e)}))}},{key:"render",value:function(){if(this.state.data)var e=new F(this.state.prices),t=Object(r.jsx)(m,{hoveredBorough:this.state.hoveredBorough,selectedBoroughs:this.state.selectedBoroughs,gradient:e,boroughColours:L,clearBoroughList:this.clearBoroughList});return Object(r.jsxs)("div",{children:[t,Object(r.jsx)(H,{gradient:e,data:this.state.data,updateHoveredBorough:this.updateHoveredBorough,updateSelectedBoroughs:this.updateSelectedBoroughs,selectedBoroughs:this.state.selectedBoroughs,boroughColours:L})]})}}]),o}(n.Component),N=function(e){e&&e instanceof Function&&o.e(3).then(o.bind(null,323)).then((function(t){var o=t.getCLS,r=t.getFID,n=t.getFCP,s=t.getLCP,a=t.getTTFB;o(e),r(e),n(e),s(e),a(e)}))};i.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(M,{})}),document.getElementById("root")),N()},98:function(e){e.exports=JSON.parse('{"City of London":"#965730","Barking and Dagenham":"#7ba201","Barnet":"#8bb382","Bexley":"#2f164e","Brent":"#0b71d7","Bromley":"#dea997","Camden":"#462d4c","Croydon":"#a263df","Ealing":"#f1147e","Enfield":"#5d9925","Greenwich":"#0a3bde","Hackney":"#9727ad","Hammersmith and Fulham":"#51b8d8","Haringey":"#838dfc","Harrow":"#94a93c","Havering":"#cd5ca4","Hillingdon":"#54aaa7","Hounslow":"#7c4fbd","Islington":"#2568df","Kensington and Chelsea":"#5362a3","Kingston upon Thames":"#3b0925","Lambeth":"#a89782","Lewisham":"#e4a562","Merton":"#fb6b55","Newham":"#f11db8","Redbridge":"#0584dc","Richmond upon Thames":"#23a03a","Southwark":"#ca73ec","Sutton":"#a6087a","Tower Hamlets":"#e67f05","Waltham Forest":"#21422f","Wandsworth":"#9f7e15","Westminster":"#108c3c"}')}},[[318,1,2]]]);
//# sourceMappingURL=main.03f3c94b.chunk.js.map