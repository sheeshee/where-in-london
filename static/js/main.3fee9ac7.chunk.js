(this["webpackJsonpwhere-in-london"]=this["webpackJsonpwhere-in-london"]||[]).push([[0],{167:function(e,t,o){},168:function(e,t,o){},169:function(e,t,o){},170:function(e,t,o){},317:function(e,t,o){"use strict";o.r(t);var r=o(5),s=o(0),n=o.n(s),a=o(40),c=o.n(a),i=(o(167),o(20)),h=o(16),u=o(8),d=o(23),l=o(22),p=(o(168),o(169),o(98)),g=(o(170),o(30));function b(e){var t=Object(p.a)(e.toString()).reverse().join("").match(/.{1,3}/g);return"\xa3"+Object(p.a)(t.join(",")).reverse().join("")}function j(e){return e.replace(" and "," & ")}var v=function(e){Object(d.a)(o,e);var t=Object(l.a)(o);function o(){return Object(i.a)(this,o),t.apply(this,arguments)}return Object(h.a)(o,[{key:"getHoveredBorough",value:function(){return this.props.hoveredBorough?j(this.props.hoveredBorough):null}},{key:"render",value:function(){var e,t=this,o=this.props.selectedBoroughs.map((function(e,o){return Object(r.jsx)(g.b,{dataKey:j(e),dot:!1,stroke:t.props.boroughColours[j(e)],isAnimationActive:!1},o)}));return this.props.selectedBoroughs.includes(this.getHoveredBorough)||(e=Object(r.jsx)(g.b,{dataKey:this.getHoveredBorough(),dot:!1,stroke:"lightgrey",isAnimationActive:!1},"hover")),Object(r.jsx)("div",{className:"plot",children:this.props.data?Object(r.jsx)(g.d,{width:"99%",height:"99%",children:Object(r.jsxs)(g.c,{data:this.props.data,children:[e,o,Object(r.jsx)(g.a,{}),Object(r.jsx)(g.e,{dataKey:"date"}),Object(r.jsx)(g.f,{type:"number",tickFormatter:b})]})}):Object(r.jsx)("div",{children:"Loading..."})})}}]),o}(s.Component),f=function(e){Object(d.a)(o,e);var t=Object(l.a)(o);function o(){return Object(i.a)(this,o),t.apply(this,arguments)}return Object(h.a)(o,[{key:"render",value:function(){var e;return e=this.props.hoveredBorough&&!this.props.selectedBoroughs.includes(this.props.hoveredBorough)?Object(r.jsxs)("div",{children:["Click now to add ",Object(r.jsx)("span",{className:"borough-add",children:this.props.hoveredBorough}),"."]}):this.props.hoveredBorough&&this.props.selectedBoroughs.includes(this.props.hoveredBorough)?Object(r.jsxs)("div",{children:["Click now to remove ",Object(r.jsx)("span",{style:{backgroundColor:this.props.boroughColours[this.props.hoveredBorough]},children:this.props.hoveredBorough}),"."]}):this.props.selectedBoroughs.length>0?Object(r.jsx)("div",{className:"clear-borough-prompt",onClick:this.props.clearBoroughList,children:"Click here to clear the plot."}):Object(r.jsx)("div",{children:"Click on a borough to add its plot."}),Object(r.jsx)("div",{className:"interaction-prompt",children:e})}}]),o}(s.Component),O=function(e){Object(d.a)(o,e);var t=Object(l.a)(o);function o(){return Object(i.a)(this,o),t.apply(this,arguments)}return Object(h.a)(o,[{key:"render",value:function(){var e=this,t=this.props.selectedBoroughs.map((function(t,o){return Object(r.jsx)("span",{style:{backgroundColor:e.props.boroughColours[t]},children:t},o)}));return Object(r.jsxs)("div",{className:"selected-boroughs-list",children:[Object(r.jsx)("span",{className:"mobile-clear",onClick:this.props.clearBoroughList,children:"Clear All"}),t]})}}]),o}(s.Component),B=function(e){Object(d.a)(o,e);var t=Object(l.a)(o);function o(e){var r;return Object(i.a)(this,o),(r=t.call(this,e)).state={data:null},r}return Object(h.a)(o,[{key:"componentDidMount",value:function(){var e=this;fetch("/where-in-london/data/average-house-prices.json").then((function(e){return e.json()})).then((function(t){e.setState({data:t}),console.log("Loaded price data!")})).catch((function(e){return console.error("Could not load data:\n",e)}))}},{key:"render",value:function(){return Object(r.jsxs)("div",{className:"control-box",children:[Object(r.jsx)("h1",{children:"Average House Sale Prices in London"}),Object(r.jsxs)("div",{className:"subtitle-container",children:[Object(r.jsx)("h2",{children:Object(r.jsx)("a",{href:"https://data.london.gov.uk/dataset/uk-house-price-index",children:"Data Source"})}),Object(r.jsx)("h2",{children:Object(r.jsx)("a",{href:"https://github.com/sheeshee/where-in-london",children:"View on GitHub"})})]}),Object(r.jsx)(v,{data:this.state.data,hoveredBorough:this.props.hoveredBorough,selectedBoroughs:this.props.selectedBoroughs,boroughColours:this.props.boroughColours}),Object(r.jsx)(O,{selectedBoroughs:this.props.selectedBoroughs,boroughColours:this.props.boroughColours,clearBoroughList:this.props.clearBoroughList}),Object(r.jsx)(f,{selectedBoroughs:this.props.selectedBoroughs,hoveredBorough:this.props.hoveredBorough,boroughColours:this.props.boroughColours,clearBoroughList:this.props.clearBoroughList})]})}}]),o}(s.Component),m=o(11),x=o(319),C=o(321),y=o(320),k=Object(m.latLngBounds)(Object(m.latLng)(50,-3),Object(m.latLng)(53,3)),H=function(e){Object(d.a)(o,e);var t=Object(l.a)(o);function o(e){var r;return Object(i.a)(this,o),(r=t.call(this,e)).style=function(e){return{fillColor:r.props.boroughColours[e.properties.name],weight:2,opacity:.5,color:"black",fillOpacity:r.props.selectedBoroughs.includes(e.properties.name)?.8:0}},r.onEachFeature=function(e,t){t.on({mouseover:r.highlightFeature.bind(Object(u.a)(r)),mouseout:r.resetHovered.bind(Object(u.a)(r)),click:r.clickOnFeature.bind(Object(u.a)(r))})},r.highlightFeature=function(e){var t=e.target;r.props.updateHoveredBorough(t.feature.properties.name),r.setHighlight(t)},r.setHighlight=function(e){e.setStyle({fillOpacity:r.props.selectedBoroughs.includes(e.feature.properties.name)?.8:.5})},r.resetHovered=function(e){r.props.updateHoveredBorough("")},r.clickOnFeature=function(e){var t=e.target;r.props.updateSelectedBoroughs(t.feature.properties.name),r.setHighlight(t)},r.geojsonRef=n.a.createRef(),r.state={lat:51.505,lng:-.1278,zoom:9},r}return Object(h.a)(o,[{key:"render",value:function(){var e=[this.state.lat,this.state.lng];return Object(r.jsxs)(x.a,{center:e,zoom:this.state.zoom,minZoom:9,maxBounds:k,children:[Object(r.jsx)(C.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),this.props.data?Object(r.jsx)(y.a,{ref:this.geojsonRef,data:this.props.data,style:this.style,onEachFeature:this.onEachFeature.bind(this)}):null]})}}]),o}(s.Component),L=o(97),S=function(e){Object(d.a)(o,e);var t=Object(l.a)(o);function o(e){var r;return Object(i.a)(this,o),(r=t.call(this,e)).updateHoveredBorough=function(e){r.setState({hoveredBorough:e})},r.updateSelectedBoroughs=function(e){var t=r.state.selectedBoroughs;t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),r.setState({selectedBoroughs:t})},r.clearBoroughList=function(){r.setState({selectedBoroughs:[]})},r.updateHoveredBorough=r.updateHoveredBorough.bind(Object(u.a)(r)),r.updateSelectedBoroughs=r.updateSelectedBoroughs.bind(Object(u.a)(r)),r.clearBoroughList=r.clearBoroughList.bind(Object(u.a)(r)),r.state={hoveredBorough:"",selectedBoroughs:[],data:null,prices:null},console.log("App Constructed"),r}return Object(h.a)(o,[{key:"componentDidMount",value:function(){var e=this;fetch("/where-in-london/data/london_boroughs.json").then((function(e){return e.json()})).then((function(t){console.log("Loaded boroughs!");var o=t.features.map((function(e){return parseFloat(e.properties.latest_average_price)}));e.setState({data:t,prices:o})})).catch((function(e){return console.error("Failed to load data:\n",e)}))}},{key:"render",value:function(){if(this.state.data)var e=Object(r.jsx)(B,{hoveredBorough:this.state.hoveredBorough,selectedBoroughs:this.state.selectedBoroughs,boroughColours:L,clearBoroughList:this.clearBoroughList});return Object(r.jsxs)("div",{children:[e,Object(r.jsx)(H,{data:this.state.data,updateHoveredBorough:this.updateHoveredBorough,updateSelectedBoroughs:this.updateSelectedBoroughs,selectedBoroughs:this.state.selectedBoroughs,boroughColours:L})]})}}]),o}(s.Component),w=function(e){e&&e instanceof Function&&o.e(3).then(o.bind(null,322)).then((function(t){var o=t.getCLS,r=t.getFID,s=t.getFCP,n=t.getLCP,a=t.getTTFB;o(e),r(e),s(e),n(e),a(e)}))};c.a.render(Object(r.jsx)(n.a.StrictMode,{children:Object(r.jsx)(S,{})}),document.getElementById("root")),w()},97:function(e){e.exports=JSON.parse('{"City of London":"#965730","Barking and Dagenham":"#7ba201","Barnet":"#8bb382","Bexley":"#2f164e","Brent":"#0b71d7","Bromley":"#dea997","Camden":"#462d4c","Croydon":"#a263df","Ealing":"#f1147e","Enfield":"#5d9925","Greenwich":"#0a3bde","Hackney":"#9727ad","Hammersmith and Fulham":"#51b8d8","Haringey":"#838dfc","Harrow":"#94a93c","Havering":"#cd5ca4","Hillingdon":"#54aaa7","Hounslow":"#7c4fbd","Islington":"#2568df","Kensington and Chelsea":"#5362a3","Kingston upon Thames":"#3b0925","Lambeth":"#a89782","Lewisham":"#e4a562","Merton":"#fb6b55","Newham":"#f11db8","Redbridge":"#0584dc","Richmond upon Thames":"#23a03a","Southwark":"#ca73ec","Sutton":"#a6087a","Tower Hamlets":"#e67f05","Waltham Forest":"#21422f","Wandsworth":"#9f7e15","Westminster":"#108c3c"}')}},[[317,1,2]]]);
//# sourceMappingURL=main.3fee9ac7.chunk.js.map